<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Weather Design ‚Äî Responsive Widget</title>
  <style>
    :root{
      --bg-start: #0f172a;
      --bg-end: #0b1220;
      --card: rgba(255,255,255,0.06);
      --glass: rgba(255,255,255,0.06);
      --accent: linear-gradient(90deg,#56CCF2 0%,#2F80ED 100%);
      --warm: linear-gradient(90deg,#FFAF7B 0%,#FF7B7B 100%);
      --safe: #10B981;
      --warn: #F59E0B;
      --danger: #EF4444;
      color-scheme: dark;
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }

    *{box-sizing:border-box}
    html,body{height:100%;margin:0;background:radial-gradient(1200px 600px at 10% 10%, rgba(47,128,237,0.12), transparent), linear-gradient(180deg,var(--bg-start),var(--bg-end));-webkit-font-smoothing:antialiased}

    .app{
      max-width:980px;margin:32px auto;padding:20px;display:grid;grid-template-columns: 1fr 360px;gap:20px;align-items:start;
    }

    /* Responsive: stack on small screens */
    @media (max-width:820px){
      .app{grid-template-columns:1fr;max-width:420px;padding:16px}
    }

    /* Main weather card */
    .weather-card{background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));border-radius:16px;padding:18px;backdrop-filter: blur(6px);box-shadow:0 6px 18px rgba(2,6,23,0.6);border:1px solid rgba(255,255,255,0.04)}

    .header{display:flex;justify-content:space-between;align-items:center}
    .city{font-size:1.15rem;font-weight:600}
    .meta{font-size:0.9rem;color:rgba(255,255,255,0.7)}

    .main-row{display:flex;gap:18px;align-items:center;padding:14px 0}
    .temp{font-size:3.6rem;font-weight:700;line-height:1;color:white}
    .feels{font-size:0.9rem;color:rgba(255,255,255,0.8);margin-top:6px}

    .icon-wrap{width:120px;height:120px;display:flex;align-items:center;justify-content:center;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));}

    .small{font-size:0.9rem;color:rgba(255,255,255,0.8)}

    /* Forecast timeline */
    .forecast{display:flex;overflow:auto;padding:8px 2px;gap:8px}
    .forecast-card{min-width:88px;background:rgba(255,255,255,0.02);padding:10px;border-radius:10px;text-align:center;border:1px solid rgba(255,255,255,0.02)}
    .forecast-card .hour{font-size:0.85rem}
    .forecast-card .f-temp{font-weight:600;margin-top:6px}

    /* Right column widgets */
    .side{display:flex;flex-direction:column;gap:12px}
    .card{background:var(--card);padding:12px;border-radius:12px;border:1px solid rgba(255,255,255,0.03)}

    /* Alert banner */
    .alert{display:flex;gap:12px;padding:10px;border-radius:10px;align-items:center}
    .alert .text{font-weight:600}

    .controls{display:flex;gap:8px;align-items:center}
    .toggle{display:inline-flex;align-items:center;gap:8px}
    .switch{width:44px;height:26px;background:rgba(255,255,255,0.08);border-radius:20px;padding:3px;display:flex;align-items:center;transition:all .25s}
    .knob{width:20px;height:20px;border-radius:50%;background:white;box-shadow:0 3px 8px rgba(2,6,23,0.6);transform:translateX(0);transition:transform .25s}
    .switch.on{background:linear-gradient(90deg,#2F80ED,#56CCF2)}
    .switch.on .knob{transform:translateX(18px)}

    /* Farm Mode gauge */
    .gauge{display:grid;grid-template-columns:1fr 1fr;gap:8px;align-items:center}
    .gauge .meter{height:72px;border-radius:10px;background:linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));display:flex;align-items:center;justify-content:center;font-weight:700}

    /* Compact watch widget */
    .watch-widget{display:none}
    @media (max-width:380px){
      .app{padding:12px}
      .app > *:not(.watch-widget){display:none}
      .watch-widget{display:block}
    }

    /* tiny animations */
    .pulse{animation:pulse 2s infinite}
    @keyframes pulse{0%{transform:scale(1)}50%{transform:scale(1.02)}100%{transform:scale(1)}}

    /* footer */
    .attribution{font-size:0.78rem;color:rgba(255,255,255,0.55);text-align:center;margin-top:12px}

    /* Scrollbar styling for forecast */
    .forecast::-webkit-scrollbar{height:8px}
    .forecast::-webkit-scrollbar-thumb{background:rgba(255,255,255,0.06);border-radius:20px}

  </style>
</head>
<body>
  <div class="app">
    <!-- MAIN CARD -->
    <section class="weather-card" aria-label="weather main">
      <div class="header">
        <div>
          <div class="city" id="city">Nagpur, IN</div>
          <div class="meta" id="time">Fri, Oct 24 ‚Ä¢ 9:28 PM</div>
        </div>
        <div class="controls">
          <div class="toggle" title="Toggle units">
            <button id="unitBtn" class="switch" aria-pressed="false" aria-label="Toggle ¬∞C/¬∞F"><span class="knob"></span></button>
          </div>
          <button id="refresh" title="Refresh" aria-label="Refresh data">üîÑ</button>
        </div>
      </div>

      <div class="main-row">
        <div>
          <div class="temp" id="temp">27<span style="font-size:1.1rem">¬∞C</span></div>
          <div class="feels" id="desc">Mostly clear ‚Ä¢ Feels like 26¬∞C</div>
          <div style="display:flex;gap:12px;margin-top:10px;">
            <div class="small">Humidity: <strong id="hum">62%</strong></div>
            <div class="small">Wind: <strong id="wind">8 km/h</strong></div>
            <div class="small">UV: <strong id="uv">3</strong></div>
          </div>
        </div>
        <div style="margin-left:auto;display:flex;flex-direction:column;align-items:center;gap:8px">
          <div class="icon-wrap" id="iconWrap">
            <!-- Sunny SVG (will be swapped by JS) -->
            <svg id="iconSvg" width="96" height="96" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <circle cx="12" cy="12" r="4" fill="#FFD166"/>
              <g stroke="#FFD166" stroke-width="1.2">
                <path d="M12 1v2" stroke-linecap="round"/>
                <path d="M12 21v2" stroke-linecap="round"/>
                <path d="M4.2 4.2l1.4 1.4" stroke-linecap="round"/>
                <path d="M18.4 18.4l1.4 1.4" stroke-linecap="round"/>
                <path d="M1 12h2" stroke-linecap="round"/>
                <path d="M21 12h2" stroke-linecap="round"/>
                <path d="M4.2 19.8l1.4-1.4" stroke-linecap="round"/>
                <path d="M18.4 5.6l1.4-1.4" stroke-linecap="round"/>
              </g>
            </svg>
          </div>

          <div class="small">High: <strong id="high">29¬∞C</strong> ‚Ä¢ Low: <strong id="low">21¬∞C</strong></div>
        </div>
      </div>

      <div class="card">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
          <strong>Hourly Forecast</strong>
          <div class="small">Next 12 hrs</div>
        </div>
        <div class="forecast" id="forecast">
          <!-- Hourly cards injected by JS -->
        </div>
      </div>

      <div style="display:flex;gap:12px;margin-top:12px;align-items:flex-start">
        <div class="card" style="flex:1">
          <strong>Today's Summary</strong>
          <p class="small" id="summary" style="margin-top:8px">Clear skies early, clouds later. Light breeze.</p>
        </div>
        <div class="card" style="width:160px;display:flex;flex-direction:column;gap:8px;align-items:center;justify-content:center">
          <div style="font-size:0.85rem;color:rgba(255,255,255,0.8)">Sunrise</div>
          <div style="font-weight:700">6:08 AM</div>
          <div style="height:8px"></div>
          <div style="font-size:0.85rem;color:rgba(255,255,255,0.8)">Sunset</div>
          <div style="font-weight:700">5:34 PM</div>
        </div>
      </div>

      <div class="attribution">Design demo ‚Ä¢ No external APIs loaded by default. Use the Fetch snippet (in JS) with your API key to load real weather.</div>
    </section>

    <!-- SIDE COLUMN -->
    <aside class="side">
      <div class="card" id="alertCard" aria-live="polite">
        <!-- Alert example -->
        <div class="alert" style="background:linear-gradient(90deg, rgba(245,158,11,0.12), rgba(239,68,68,0.06));border:1px solid rgba(245,158,11,0.12)">
          <div>‚ö†Ô∏è</div>
          <div>
            <div class="text" id="alertTitle">No active alerts</div>
            <div class="small" id="alertText">You're good for the next 24 hours.</div>
          </div>
        </div>
      </div>

      <div class="card">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
          <strong>Farm Mode</strong>
          <div class="small">Automatic tips</div>
        </div>
        <div class="gauge">
          <div class="meter" id="soil">Soil 58%</div>
          <div class="meter" id="rainprob">Rain 12%</div>
        </div>
        <div style="display:flex;gap:8px;margin-top:8px;align-items:center">
          <button id="irrigate" style="flex:1;padding:8px;border-radius:8px;border:none;background:var(--accent);color:white;font-weight:700">Trigger Irrigation</button>
          <button id="advise" style="padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:white">Advice</button>
        </div>
      </div>

      <div class="card">
        <strong>Preferences</strong>
        <div style="margin-top:8px;display:flex;gap:8px;flex-direction:column">
          <label style="display:flex;justify-content:space-between;align-items:center"><span>Night mode</span><input id="night" type="checkbox"/></label>
          <label style="display:flex;justify-content:space-between;align-items:center"><span>Farm alerts</span><input id="farmAlerts" type="checkbox" checked/></label>
        </div>
      </div>
    </aside>

    <!-- WATCH WIDGET (shows on very small screens) -->
    <section class="weather-card watch-widget" aria-label="watch weather">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <div>
          <div style="font-weight:700">Nagpur</div>
          <div class="small">27¬∞C ‚Ä¢ Clear</div>
        </div>
        <div style="display:flex;flex-direction:column;align-items:center">
          <div style="font-weight:800;font-size:1.6rem">27¬∞</div>
          <div style="font-size:0.75rem;color:rgba(255,255,255,0.8)">H 29 ‚Ä¢ L 21</div>
        </div>
      </div>
    </section>

  </div>

  <script>
    // ---------- Mock data and UI wiring ----------
    const mock = {
      city: 'Nagpur, IN',
      time: 'Fri, Oct 24 ‚Ä¢ 9:28 PM',
      tempC: 27,
      desc: 'Mostly clear',
      feels: 26,
      humidity: 62,
      windKmh: 8,
      uv: 3,
      high: 29,
      low: 21,
      summary: 'Clear skies early, clouds later. Light breeze.',
      hourly: [
        {h:'10 PM',t:27,icon:'clear'},
        {h:'11 PM',t:26,icon:'clear'},
        {h:'12 AM',t:25,icon:'clouds'},
        {h:'1 AM',t:25,icon:'clouds'},
        {h:'2 AM',t:24,icon:'rain'},
        {h:'3 AM',t:24,icon:'rain'},
        {h:'4 AM',t:23,icon:'rain'},
        {h:'5 AM',t:23,icon:'clouds'},
        {h:'6 AM',t:24,icon:'sunrise'},
        {h:'7 AM',t:26,icon:'sunny'},
        {h:'8 AM',t:28,icon:'sunny'},
        {h:'9 AM',t:29,icon:'sunny'},
      ],
      alert: null,
      soil:58,
      rainprob:12
    }

    // DOM refs
    const cityEl = document.getElementById('city');
    const timeEl = document.getElementById('time');
    const tempEl = document.getElementById('temp');
    const descEl = document.getElementById('desc');
    const humEl = document.getElementById('hum');
    const windEl = document.getElementById('wind');
    const uvEl = document.getElementById('uv');
    const highEl = document.getElementById('high');
    const lowEl = document.getElementById('low');
    const summaryEl = document.getElementById('summary');
    const forecastEl = document.getElementById('forecast');
    const iconSvg = document.getElementById('iconSvg');
    const alertTitle = document.getElementById('alertTitle');
    const alertText = document.getElementById('alertText');
    const soilEl = document.getElementById('soil');
    const rainEl = document.getElementById('rainprob');

    // initial render
    function render(data){
      cityEl.textContent = data.city;
      timeEl.textContent = data.time;
      tempEl.innerHTML = `${data.tempC}<span style=\"font-size:1.1rem\">¬∞C</span>`;
      descEl.textContent = `${data.desc} ‚Ä¢ Feels like ${data.feels}¬∞C`;
      humEl.textContent = data.humidity + '%';
      windEl.textContent = data.windKmh + ' km/h';
      uvEl.textContent = data.uv;
      highEl.textContent = data.high + '¬∞C';
      lowEl.textContent = data.low + '¬∞C';
      summaryEl.textContent = data.summary;
      soilEl.textContent = 'Soil ' + data.soil + '%';
      rainEl.textContent = 'Rain ' + data.rainprob + '%';

      // alert
      if(data.alert){
        alertTitle.textContent = data.alert.title;
        alertText.textContent = data.alert.description;
        document.getElementById('alertCard').style.borderColor = 'rgba(239,68,68,0.12)';
      } else {
        alertTitle.textContent = 'No active alerts';
        alertText.textContent = 'You\'re good for the next 24 hours.';
      }

      // hourly forecast
      forecastEl.innerHTML = '';
      data.hourly.forEach(h => {
        const c = document.createElement('div');
        c.className = 'forecast-card';
        c.innerHTML = `<div class=\"hour\">${h.h}</div><div style=\"height:8px\"></div>${renderIconSmall(h.icon)}<div class=\"f-temp\">${h.t}¬∞</div>`;
        forecastEl.appendChild(c);
      });

      // set big icon
      setMainIcon(data.hourly[0].icon);
    }

    // small icon helper (returns inline SVG string)
    function renderIconSmall(type){
      if(type === 'rain') return `<svg width=\"36\" height=\"36\" viewBox=\"0 0 24 24\"><path d=\"M16 13a4 4 0 0 0-3.9-3 5 5 0 0 0-9.1 1A4 4 0 0 0 6 18h10\" fill=\"none\" stroke=\"#93C5FD\" stroke-width=\"1.2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path><path d=\"M8 19v2M11 17v4M14 18v3\" stroke=\"#60A5FA\" stroke-width=\"1.6\" stroke-linecap=\"round\"></path></svg>`;
      if(type === 'clouds' || type === 'cloud') return `<svg width=\"36\" height=\"36\" viewBox=\"0 0 24 24\"><path d=\"M20 17.58A4 4 0 0 0 16 14H7a4 4 0 0 0 0 8h9a5 5 0 0 0 4-4.42z\" fill=\"#CBD5E1\"></path></svg>`;
      if(type === 'sunny' || type === 'clear') return `<svg width=\"36\" height=\"36\" viewBox=\"0 0 24 24\"><circle cx=\"12\" cy=\"12\" r=\"4\" fill=\"#FFD166\"></circle></svg>`;
      if(type === 'sunrise') return `<svg width=\"36\" height=\"36\" viewBox=\"0 0 24 24\"><path d=\"M2 12h2M20 12h2M4.5 8.5l1.5 1.5M18 8.5l1.5 1.5M12 4v2M12 22v-2M3 16a9 9 0 0 1 18 0\" stroke=\"#FFD166\" stroke-width=\"1.4\" stroke-linecap=\"round\" stroke-linejoin=\"round\" fill=\"none\"></path></svg>`;
      return `<svg width=\"36\" height=\"36\" viewBox=\"0 0 24 24\"><circle cx=\"12\" cy=\"12\" r=\"4\" fill=\"#E5E7EB\"></circle></svg>`;
    }

    function setMainIcon(type){
      const wrap = document.getElementById('iconWrap');
      const svgs = {
        clear: `<svg width=\"96\" height=\"96\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><circle cx=\"12\" cy=\"12\" r=\"4\" fill=\"#FFD166\"/><g stroke=\"#FFD166\" stroke-width=\"1.3\"><path d=\"M12 1v2" stroke-linecap=\"round\"/></g></svg>`,
        rain: `<svg width=\"96\" height=\"96\" viewBox=\"0 0 24 24\"><path d=\"M16 13a4 4 0 0 0-3.9-3 5 5 0 0 0-9.1 1A4 4 0 0 0 6 18h10\" fill=\"none\" stroke=\"#93C5FD\" stroke-width=\"1.2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path><path d=\"M8 19v2M11 17v4M14 18v3\" stroke=\"#60A5FA\" stroke-width=\"2.2\" stroke-linecap=\"round\"></path></svg>`,
        clouds: `<svg width=\"96\" height=\"96\" viewBox=\"0 0 24 24\"><path d=\"M20 17.58A4 4 0 0 0 16 14H7a4 4 0 0 0 0 8h9a5 5 0 0 0 4-4.42z\" fill=\"#CBD5E1\"></path></svg>`
      }
      wrap.innerHTML = svgs[type] || svgs['clear'];
    }

    // unit toggle
    document.getElementById('unitBtn').addEventListener('click', (e)=>{
      const btn = e.currentTarget;
      const isOn = btn.classList.toggle('on');
      btn.setAttribute('aria-pressed', isOn);
      // convert temps
      if(isOn){
        // show ¬∞F
        const f = Math.round(mock.tempC * 9/5 + 32);
        tempEl.innerHTML = `${f}<span style=\"font-size:1.1rem\">¬∞F</span>`;
        highEl.textContent = Math.round(mock.high * 9/5 + 32) + '¬∞F';
        lowEl.textContent = Math.round(mock.low * 9/5 + 32) + '¬∞F';
      } else {
        tempEl.innerHTML = `${mock.tempC}<span style=\"font-size:1.1rem\">¬∞C</span>`;
        highEl.textContent = mock.high + '¬∞C';
        lowEl.textContent = mock.low + '¬∞C';
      }
    });

    // irrigation button (demo)
    document.getElementById('irrigate').addEventListener('click', ()=>{
      alert('Irrigation sequence triggered (demo) ‚Äî in a real app this would call your farm controller.');
    });

    // advice button
    document.getElementById('advise').addEventListener('click', ()=>{
      alert('Advice: Soil at ' + mock.soil + '% ‚Äî good. Consider irrigation if below 40% or if rainprob < 10%.');
    });

    // refresh (would fetch from API)
    document.getElementById('refresh').addEventListener('click', ()=>{
      // For demo we just re-render mock; replace with fetchLiveWeather() to load real data.
      render(mock);
    });

    // render on load
    render(mock);


    /*
      === Fetch live weather (example) ===
      Replace 'YOUR_API_KEY' and uncomment to enable. Use OpenWeatherMap or similar.

    async function fetchLiveWeather(){
      const key = 'YOUR_API_KEY';
      const lat = '21.1458'; const lon = '79.0882'; // Nagpur example
      const url = `https://api.openweathermap.org/data/2.5/onecall?lat=${lat}&lon=${lon}&units=metric&appid=${key}`;
      try{
        const res = await fetch(url);
        const data = await res.json();
        // parse into our shape and call render(parsed)
      }catch(e){
        console.error('Failed to fetch',e);
      }
    }
    */

  </script>
</body>
</html>
